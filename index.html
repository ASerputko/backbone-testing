<!DOCTYPE html><!--[if lt IE 7]>
<html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"></html><![endif]--><!--[if IE 7]>
<html lang="en" class="no-js lt-ie9 lt-ie8"></html><![endif]--><!--[if IE 8]>
<html lang="en" class="no-js lt-ie9"></html><![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en" class="no-js">
  <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Backbone.js Testing</title>
    <meta name="description" content="Example applications and chapter samples for Backbone.js Testing.">
    <meta name="keywords" content="backbone.js testings, backbone.js, backbone, javascript, underscore.js, jquery, testing, unit test">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="vendor-ln/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="vendor-ln/bootstrap/css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="doc/site.css">
  </head>
  <body><a href="https://github.com/ryan-roemer/backbone-testing" style="position: absolute; top: 0; right: 0; border: 0;" class="hidden-phone"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub" class="banner"></a>
    <header id="hero" class="hero-unit backing"></header>
    <div class="container"><h1>Backbone.js Testing</h1>

<p>Sample apps, test suites, and ideas for Backbone.js.</p>

<h2>Introduction</h2>

<p>This site provides materials and resources for testing <a href="https://github.com/documentcloud/backbone">Backbone.js</a>
web applications. Created as a companion for the forthcoming
&quot;Backbone.js Testing&quot; book, we provide tests and code snippets for each book
chapter, as well as a a reference Backbone.js application
- &quot;<a href="./notes/app/index.html">Notes</a>&quot; - that is used in various testing exercises.</p>

<p>The application technologies we cover include:</p>

<ul><li><strong><a href="http://jquery.com/">jQuery</a></strong></li><li><strong><a href="http://underscorejs.org/">Underscore.js</a></strong></li><li><strong><a href="http://backbonejs.org/">Backbone.js</a></strong></li></ul>

<p>And the test stack is comprised of:</p>

<ul><li><strong><a href="http://visionmedia.github.com/mocha/">Mocha</a></strong></li><li><strong><a href="http://chaijs.com/">Chai</a></strong></li><li><strong><a href="http://sinonjs.org/">Sinon.JS</a></strong></li></ul>

<p>All of the content here is very much a work in progress, with lots of likely
incidental errors and such. Bear with us as things evolve...</p>

<h2>Compatibility</h2>

<p>The application and test samples should work for the following browser /
version combinations:</p>

<ul><li>Chrome: 7+</li><li>Safari: 5+</li><li>Firefox: 4+</li><li>Internet Explorer: 9+</li></ul>

<p>See the Chai <a href="http://chaijs.com/guide/installation/">installation notes</a> for
more compatibility information. <em>Note</em> that the Chai <code>should</code> object
prototype extension is not compatible with IE 9 and lower.</p>

<h2>Notes App</h2>

<p>&quot;Notes&quot; is a simple personal note manager, written in Backbone.js. We provide
two versions -- a &quot;quick and easy&quot; <code>localStorage</code> based application that works
in your browser with no additional setup, and a &quot;classic&quot; application with
a full REST backend.</p>

<h3>The Tour</h3>

<p><strong>TODO: Write up tour and add screenshots.</strong></p>

<h3>LocalStorage App</h3>

<p>The directory &quot;<code>notes/app</code>&quot; contains the standalone application, which uses
HTML5 <a href="https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage">localStorage</a> as a backing store. The application has a working
<strong><a href="./notes/app/index.html">online demo</a></strong> as well as a full suite of
<strong><a href="./notes/test/test.html">tests</a></strong> that you can try out from this page.</p>

<p><em>Note</em> that because the application uses <code>localStorage</code>, data is only persisted
to the specific browser and computer that you use with the application.</p>

<h3>Server-Backed App</h3>

<p>An alternative version of the application uses
<a href="http://www.mongodb.org/">MongoDB</a> instead of <code>localStorage</code> for notes data and
can be found in the &quot;<code>notes-rest</code>&quot; directory. The application is
served via a <a href="http://nodejs.org/">Node.js</a>/<a href="http://expressjs.com/">Express</a>
application located in &quot;<a href="./notes-rest/server.js">notes-rest/server.js</a>&quot;.</p>

<p>The server application requires <a href="http://nodejs.org/download/">Node.js</a> and
<a href="http://docs.mongodb.org/manual/installation/">MongoDB</a> installations.
Once you have these installed, you can change into the root of this repository
and install all of the project libraries:</p>

<pre><code>$ npm install</code></pre>

<p>To run the sample server application, you will need two terminal windows.
In the first window, start up MongoDB:</p>

<pre><code>$ npm run-script mongo-start</code></pre>

<p>In the second window, start up the Express server:</p>

<pre><code>$ npm start</code></pre>

<p>And from there you can navigate a browser to:
<a href="http://127.0.0.1:4321/app/">http://127.0.0.1:4321/app/</a>
and see the application running. Note that you can control several application
options by setting console environment variables:</p>

<ul><li><code>MONGO_ADDR</code>: MongoDB host address (default <code>127.0.0.1</code>).</li><li><code>MONGO_PORT</code>: MongoDB port (default <code>27027</code>).</li><li><code>ADDR</code>: Express server host address (default <code>127.0.0.1</code>).</li><li><code>PORT</code>: Express server port (default <code>4321</code>).</li></ul>

<p>For example:</p>

<pre><code>$ export PORT=4323; npm start</code></pre>

<p>runs the server on port 4323 instead of 4321 (the default).</p>

<h2>Chapter Examples</h2>

<p>The examples for each chapter are provided in the &quot;chapters&quot; directory,
separated by number. We also provide a driver page for (nearly) all of
<a href="./chapters/test.html">the non-application tests</a>.</p>

<h3>Chapter 1: Setting up a Test Infrastructure</h3>

<ul><li><p><strong><a href="./chapters/01/test/test.html">Trying out the test libraries</a></strong>: Some
first basic unit tests using Mocha, Chai, and SinonJS.</p><ul><li><p><a href="./chapters/01/test/js/spec/hello.spec.js">hello.spec.js</a></p></li></ul></li><li><p><strong><a href="./chapters/01/test/test-failure.html">Test Failures</a></strong>:
Different types of test failures.</p><ul><li><p><a href="./chapters/01/test/js/spec/failure.spec.js">failure.spec.js</a></p></li></ul></li><li><p><strong><a href="./chapters/01/test/test-timing.html">Test Timing</a></strong>:
Tests that take different times, which Mocha annotates for &quot;medium&quot;
and &quot;slow&quot; tests. Also has one test timeout failure.</p><ul><li><a href="./chapters/01/test/js/spec/timing.spec.js">timing.spec.js</a></li></ul></li></ul>

<h3>Chapter 2: Creating a Backbone.js Application Test Plan</h3>

<ul><li><strong><a href="./chapters/02/test/test.html">Tests</a></strong>:
Initial simple tests for a Backbone.js application.<ul><li><a href="./chapters/02/test/js/spec/namespace.spec.js">namespace.spec.js</a>:
Verifies <a href="./notes/app/js/app/namespace.js">namespace</a>
objects are correctly setup.</li><li><a href="./chapters/02/test/js/spec/models/note.spec.js">models/note.spec.js</a>:
Tests the application model
<a href="./notes/app/js/app/models/note.js"><code>App.Models.Note</code></a>.</li></ul></li></ul>

<h3>Chapter 3: Test Assertions, Specs, and Suites</h3>

<ul><li><p><strong><a href="./chapters/03/test/test-bdd.html">BDD Interface</a></strong>: Tests using
<a href="http://visionmedia.github.com/mocha/#bdd-interface">Mocha</a>
and <a href="http://chaijs.com/api/bdd/">Chai</a> <strong>BDD</strong> styles.</p><ul><li><p><a href="./chapters/03/test/js/spec/bdd.spec.js">bdd.spec.js</a></p></li></ul></li><li><p><strong><a href="./chapters/03/test/test-tdd.html">TDD Interface</a></strong>: Tests using Mocha
<strong><a href="http://visionmedia.github.com/mocha/#tdd-interface">TDD</a></strong> and
Chai <a href="http://chaijs.com/api/assert/"><code>assert</code></a> styles.</p><ul><li><p><a href="./chapters/03/test/js/spec/tdd.spec.js">tdd.spec.js</a></p></li></ul></li><li><p><strong><a href="./chapters/03/test/test-chai.html">Chai Assertions</a></strong>: Tests using
a variety of <a href="http://chaijs.com/api/bdd/">Chai BDD</a> assertions.</p><ul><li><a href="./chapters/03/test/js/spec/chai-chains.spec.js">chai-chains.spec.js</a>:
Language chains.</li><li><a href="./chapters/03/test/js/spec/chai-values.spec.js">chai-values.spec.js</a>:
Value properties.</li><li><a href="./chapters/03/test/js/spec/chai-comparisons.spec.js">chai-comparisons.spec.js</a>:
Comparison functions.</li><li><a href="./chapters/03/test/js/spec/chai-objects.spec.js">chai-objects.spec.js</a>:
Object and array assertions.</li><li><p><a href="./chapters/03/test/js/spec/chai-errors.spec.js">chai-errors.spec.js</a>:
Exception handling.</p></li></ul></li><li><p><strong><a href="./chapters/03/test/test-only.html">Mocha <code>only</code></a></strong>: Tests using the Mocha
<code>only</code> test modifier to run a single spec.</p><ul><li><p><a href="./chapters/03/test/js/spec/mocha-only.spec.js">mocha-only.spec.js</a></p></li></ul></li><li><p><strong><a href="./chapters/03/test/test-skip.html">Mocha <code>skip</code></a></strong>: Tests using the Mocha
<code>skip</code> test modifier to skip one or more specs.</p><ul><li><p><a href="./chapters/03/test/js/spec/mocha-skip.spec.js">mocha-skip.spec.js</a></p></li></ul></li><li><p><strong><a href="./chapters/03/test/test.html">Tests</a></strong>:
Continue tests for the &quot;Notes&quot; Backbone.js application.</p><ul><li><a href="./chapters/03/test/js/spec/collections/notes.spec.js">collections/notes.spec.js</a>:
Tests the collection <a href="./notes/app/js/app/collections/notes.js"><code>App.Collections.Notes</code></a>.</li><li><a href="./chapters/03/test/js/spec/views/note-view.spec.js">views/note-view.spec.js</a>:
Tests the view <a href="./notes/app/js/app/views/note-view.js"><code>App.Views.NoteView</code></a>,
which renders model <a href="http://daringfireball.net/projects/markdown/">Markdown</a>
data into HTML.</li></ul></li></ul>

<h3>Chapter 4: Test Spies</h3>

<p><strong>TODO: Update all chapters tests.</strong>
<strong>TODO: Continue links to all chapter examples.</strong></p>

<h2>Automated Tests</h2>

<p>All of the tests for the Notes application and the chapter
samples can be run in the <a href="http://phantomjs.org/">PhantomJS</a> headless WebKit
engine. Simply install the Node.js dependencies:</p>

<pre><code>$ npm install</code></pre>

<p>and <a href="http://phantomjs.org/download.html">install PhantomJS</a> on your development machine.</p>

<p>From there, you can use the <code>mocha-phantomjs</code> binary to run any HTML test
driver page from the command line, e.g.:</p>

<pre><code>$ mocha-phantomjs notes/test/test.html</code></pre>

<p>As a helper, the following script command will run nearly all of the
Notes application and chapter unit tests:</p>

<pre><code>$ npm run-script test</code></pre>

<h2>Additional Tools</h2>

<p>There are many additional testing libraries and plugins specifically suited
to testing Backbone.js applications beyond the core test stack we use in the
application and chapter examples above.</p>

<h3>Chai</h3>

<p>Chai has a rich <a href="http://chaijs.com/plugins">plugin</a> ecosystem, with libraries
that enhance the core Chai assertion statement library, provide more specific
failure messages, and make application behavior easier to express.</p>

<ul><li><strong><a href="http://chaijs.com/plugins/chai-backbone">chai-backbone</a></strong>: Adds
Backbone.js specific assertions such as <code>expect(model).to.trigger()</code> and
<code>expect(&quot;hash/fragment&quot;).to.route.to()</code>.</li><li><strong><a href="http://chaijs.com/plugins/chai-jquery">chai-jquery</a></strong>: Adds
assertions for jQuery functions and attributes like <code>data()</code>, <code>class()</code>,
<code>id()</code>, and <code>hidden()</code>.</li><li><strong><a href="http://chaijs.com/plugins/sinon-chai">sinon-chai</a></strong>: Allows Chai to make
Sinon.JS assertions like <code>expect(spy).to.have.been.calledWith(42)</code> instead
of the Sinon.JS native <code>sinon.assertCalledWith(spy, 42)</code>.</li></ul>

<h2>Libraries &amp; Versions</h2>

<p>All frontend libraries used in this repository for the sample apps and chapter
examples are provided in the &quot;vendor&quot; directory.</p>

<p><strong>TODO: Update all library versions.</strong></p>

<p>The core Backbone.js components used are:</p>

<ul><li><strong><a href="https://github.com/jquery/jquery">jQuery</a></strong>: <code>1.9.1</code></li><li><strong><a href="https://github.com/documentcloud/underscore">Underscore.js</a></strong>: <code>1.4.4</code></li><li><strong><a href="https://github.com/documentcloud/backbone">Backbone.js</a></strong>: <code>0.9.10</code></li><li><strong><a href="https://github.com/jeromegn/backbone.localStorage">Backbone.localStorage</a></strong>: <code>1.1.0</code></li><li><strong><a href="https://github.com/douglascrockford/JSON-js">JSON</a></strong>: <em>For older browsers</em></li></ul>

<p>The sample Notes application also uses:</p>

<ul><li><strong><a href="https://github.com/twitter/bootstrap">Twitter Bootstrap</a></strong>: <code>2.3.0</code></li><li><strong><a href="https://github.com/coreyti/showdown">Showdown</a></strong>: <code>0.3.1</code></li></ul>

<p>The frontend test libraries we use are:</p>

<ul><li><strong><a href="https://github.com/visionmedia/mocha">Mocha</a></strong>: <code>1.8.1</code></li><li><strong><a href="https://github.com/chaijs/chai">Chai</a></strong>: <code>1.5.0</code></li><li><strong><a href="https://github.com/cjohansen/Sinon.JS">Sinon.JS</a></strong>: <code>1.6.0</code></li></ul>

<p>The test plugins include:</p>

<ul><li><strong><a href="https://github.com/metaskills/mocha-phantomjs">Mocha PhantomJS</a></strong>: <code>2.0.0</code></li></ul>

<h2>Licenses</h2>

<p>All code not otherwise specified is Copyright 2013 Ryan Roemer.
Released under the <a href="./LICENSE.txt">MIT</a> License.</p>

<p>This repository contains various libraries from other folks, and are licensed
as follows:</p>

<ul><li><p><a href="https://github.com/documentcloud/backbone">Backbone.js</a> is Copyright Jeremy Ashkenas and licensed under the
<a href="https://github.com/documentcloud/backbone/blob/master/LICENSE">MIT</a> license.</p></li><li><p><a href="https://github.com/documentcloud/underscore">Underscore.js</a> is Copyright Jeremy Ashkenas and licensed under
the <a href="https://github.com/documentcloud/underscore/blob/master/LICENSE">MIT</a>
license.</p></li><li><p><a href="https://github.com/jquery/jquery">jQuery</a> is Copyright jQuery Foundation and licensed under the
<a href="https://github.com/jquery/jquery/blob/master/MIT-LICENSE.txt">MIT</a> license.</p></li><li><p><a href="https://github.com/jeromegn/backbone.localStorage">Backbone.localStorage</a> is Copyright Jerome Gravel-Niquet and
licensed under the MIT license.</p></li><li><p><a href="https://github.com/douglascrockford/JSON-js">JSON</a> is Public Domain software created by Douglas Crockford.</p></li><li><p><a href="https://github.com/visionmedia/mocha">Mocha</a> is Copyright TJ Holowaychuk and licensed under the
<a href="https://github.com/visionmedia/mocha/blob/master/LICENSE">MIT</a> license.</p></li><li><p><a href="https://github.com/chaijs/chai">Chai</a> is Copyright Jake Luer and licensed under the MIT license.
<a href="https://github.com/cjohansen/Sinon.JS/blob/master/LICENSE">BSD</a> license.</p></li><li><p><a href="https://github.com/cjohansen/Sinon.JS">Sinon.JS</a> is Copyright Christian Johansen and licensed under the
<a href="https://github.com/cjohansen/Sinon.JS/blob/master/LICENSE">BSD</a> license.</p></li><li><p><a href="https://github.com/twitter/bootstrap">Twitter Bootstrap</a> is Copyright Twitter, Inc. and licensed under
the <a href="https://github.com/twitter/bootstrap/blob/master/LICENSE">Apache v2.0</a>
license.</p></li><li><p><a href="https://github.com/coreyti/showdown">Showdown</a> is Copyright Corey Innis and licensed under the
<a href="https://github.com/coreyti/showdown/blob/master/license.txt">BSD</a> license.</p></li><li><p><a href="https://github.com/metaskills/mocha-phantomjs">Mocha PhantomJS</a> is Copyright Ken Collins and licensed under the
<a href="https://github.com/metaskills/mocha-phantomjs/blob/master/MIT-LICENSE">MIT</a>
license.</p></li></ul>

<h2>Development</h2>

<p>For those who would like to get under the hood, or help out with the
application or test examples.</p>

<h3>Scripts, Commands</h3>

<p>For pretty much everything, you will need to install
<a href="http://phantomjs.org/download.html">PhantomJS</a>, a Node.js environment, and
the development NPM dependencies:</p>

<pre><code>$ npm install</code></pre>

<p>From there, there are various NPM script helpers for style checking and tests:</p>

<pre><code># Run style checks for server, client, and both.
$ npm run-script style-server
$ npm run-script style-client
$ npm run-script style

# Run headless tests for the application, individual chapters, all chapters
# as one big test, and all of these together.
$ npm run-script test-app
$ npm run-script test-chaps
$ npm run-script test-chaps-all
$ npm run-script test

# Run all style checks and headless tests.
$ npm run-script check</code></pre>

<p>The file &quot;README.md&quot; is transformed from markdown into the HTML page
&quot;index.html&quot;, and can be compiled once, or watched for changes with the
following commands.</p>

<pre><code>$ npm run-script docs
$ npm run-script docs-watch</code></pre>

<h3>Contributions</h3>

<p>Bugs, issues and fixes for any of the application or test code examples are
most welcome. Please file a GitHub
<a href="https://github.com/ryan-roemer/backbone-testing/issues">issue</a> or pull request
for any changes. Pull requests should be able to pass</p>

<pre><code>$ npm run-script check</code></pre>

<p>without any errors.</p>
    </div>
    <div id="fixtures" style="display: none;" class="hidden">
      <div id="grid" class="row">
        <div id="nav" class="span3 hidden-phone">
          <ul id="sidenav" class="nav nav-list"></ul>
        </div>
        <div id="page" class="span9"></div>
      </div>
      <div id="grid-old-ie" class="row">
        <div id="page-old-ie" class="span12"></div>
      </div>
      <li class="nav-item"><a><i class="icon-chevron-right"></i></a></li>
    </div>
    <script src="vendor-ln/jquery.min.js"></script>
    <script src="vendor-ln/underscore.min.js"></script>
    <script src="vendor-ln/bootstrap/js/bootstrap.min.js"></script>
    <script src="doc/site.js"></script>
    <script>
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-38176320-1']);
      _gaq.push(['_trackPageview']);
      
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      }());
    </script>
  </body>
</html>